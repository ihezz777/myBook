# 函数

#### 创建函数
1. 我要开辟一个新的堆内存。（堆允许程序在运行时动态地申请某个大小的内存空间，所以你可以在程序运行的时候，为函数申请内存。）
2. 创建一个函数 say ，把这个函数体中的代码放在这个堆内存中。（有规律的函数体如：对象，按照键值对的形式存储在堆内存中。而没规律的通常都是变成字符串的形式。）
3. 在当前上下文中声明 say 函数(变量)，函数声明和定义会提升到最前面。（say 是放在栈中的，同时它的右边还有一个堆内存地址，用来指向堆中的函数体的。）
4. ps: 把开辟的堆内存地址赋值给函数名 say

#### 执行函数
1. 每一个函数调用，都会在函数上下文堆栈中创建帧。

2. 开始执行函数

- 会形成一个供代码执行的环境，也是一个栈内存
- 将存储的字符串复制一份到新开辟的栈内存中，使其变为真正的 JS 代码
- 先对形参进行赋值，再进行变量提升，比如将 var function 变量提升。
- 将执行结果返回给当前调用的函数
- 为什么函数执行要在栈中执行呢？因为栈是先进后出的数据结构，因为栈是先进后出的数据结构，因为栈是先进后出的数据结构，意味着可以很好的保存和恢复调用现场.
- 因为栈的先进后出的数据结构，赋予了其递归能力。

```javascript
function f1() {
  let b = 1;
  function f2() {
    console.log(b)
  }
  return f2
}

let fun = f1()
fun()
```
